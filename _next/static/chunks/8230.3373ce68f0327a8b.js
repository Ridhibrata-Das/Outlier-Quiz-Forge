"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8230],{58230:function(e,t,r){r.r(t);var a=r(85893),i=r(67294),s=r(86501),n=r(67555),c=r.n(n);r(61601);var l=r(31417),o=r(68387);r(16303),r(64172),r(57638),r(96936);var d=r(41664),u=r.n(d),h=r(11163),m=r(63754),p=r(58386),f=r(36609),b=r(91768),_=r(5152),v=r.n(_),x=r(91259),j=r(27680);let g=v()(()=>r.e(2397).then(r.bind(r,21474)),{loadableGenerated:{webpack:()=>[21474]},ssr:!1});t.default=(0,b.Z)()(()=>{let[e,t]=(0,i.useState)(""),[n,d]=(0,i.useState)(""),[b,_]=(0,i.useState)(""),[v,N]=(0,i.useState)(!1),[y,k]=(0,i.useState)(!1),[P,Z]=(0,i.useState)(0),[w,V]=(0,i.useState)(!1),[C,S]=(0,i.useState)({name:"",mobile:"",email:"",profile:"",all_time_rank:"",all_time_score:"",coins:"",friends_code:""}),[I,D]=(0,i.useState)(!1),E=(0,h.useRouter)(),{auth:O,firebase:F}=(0,o.Z)();(0,i.useEffect)(()=>{setTimeout(()=>{let e=document.getElementById("recaptcha-container");if(e)return e.innerHTML="",window.recaptchaVerifier=new x.lI(O,e,{size:"invisible"}),()=>{window.recaptchaVerifier.clear()};console.error("Error: Could not find the recaptcha-container element in the DOM.")},1e3)},[F]);let q=r(93791).PhoneNumberUtil.getInstance(),z=e=>{try{let t=q.parse(e);return q.isValidNumber(t)}catch(e){return!1}},R=t=>{t.preventDefault(),D(!0);let r="+"+e;try{if(z(r)){let e=window.recaptchaVerifier;(0,x.$g)(O,r,e).then(e=>{N(!0),D(!1),d(e)}).catch(e=>{"auth/too-many-requests"==e.code?(E.push("/"),s.ZP.error("please try after some time latter")):(console.log(e),T(e),D(!1))})}else D(!1),s.ZP.error((0,f.t)("enter_num_with_country_code"))}catch(e){console.log(e)}Z(60),V(!0)};(0,i.useEffect)(()=>{},[R]),(0,i.useEffect)(()=>{let e;return w&&P>0?e=setInterval(()=>{Z(e=>e-1)},1e3):0===P&&V(!1),()=>clearInterval(e)},[w,P]);let T=e=>{switch(e.code){case"auth/invalid-verification-code":s.ZP.error("Invalid verification code. Please double-check the code entered.");break;case"auth/missing-verification-code":s.ZP.error("Verification code is missing.");break;case"auth/code-expired":s.ZP.error("Verification code has expired. Request a new code.");break;case"auth/invalid-verification-id":s.ZP.error("Invalid verification ID. Please retry the verification process.");break;case"auth/user-disabled":s.ZP.error("The user account has been disabled.");break;case"auth/quota-exceeded":s.ZP.error("Quota for verification attempts exceeded. Please try again later.");break;case"auth/captcha-check-failed":s.ZP.error("reCAPTCHA verification failed. Check your reCAPTCHA configuration.");break;case"auth/invalid-phone-number":s.ZP.error("Invalid phone number. Double-check the phone number format.");break;case"auth/app-not-authorized":s.ZP.error("Firebase app not authorized. Check Firebase configuration.");break;case"auth/invalid-credential":s.ZP.error("Invalid credential. Double-check the authentication credential.");break;case"auth/credential-already-in-use":s.ZP.error("Credential (phone number) is already in use.");break;case"auth/unverified-email":s.ZP.error("User account has an unverified email. Verify the email first.");break;default:s.ZP.error("Error: "+e.message)}};return(0,a.jsx)(g,{children:(0,a.jsx)("div",{className:"otpverify wrapper loginform mt-5",children:y?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(m.Z,{profile:C,setProfile:S})}):(0,a.jsxs)("div",{className:"custom-container glassmorcontain",children:[(0,a.jsx)("div",{className:"row morphisam adj_width",children:(0,a.jsx)("div",{className:"col-12 border-line position-relative Otp_Verification",children:(0,a.jsxs)("div",{className:"inner__login__form outerline",children:[v?null:(0,a.jsxs)("form",{className:"form text-start",onSubmit:R,children:[(0,a.jsx)("h3",{className:"mb-4  text-left Otp_Verification_title",children:(0,f.t)("sign_mobile")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"number",className:"mb-2 paddingRight",children:(0,f.t)("digit_code")}),(0,a.jsx)(c(),{value:e,country:"in",countryCodeEditable:!1,autoFocus:!0,onChange:e=>t(e),className:" position-relative d-inline-block w-100 form-control my-3"}),(0,a.jsx)("div",{className:"Otp_Verification_title",children:(0,a.jsx)("button",{className:"btn btn-primary",type:"submit",children:I?(0,f.t)("please_wait"):(0,f.t)("req_otp")})}),(0,a.jsx)("div",{className:"Otp_Verification_title",children:(0,a.jsxs)(u(),{className:"btn backlogin",href:"/auth/login",type:"button",children:[(0,a.jsx)(j.D_,{})," ",(0,f.t)("Back_to_login")]})})]})]}),v?(0,a.jsxs)("form",{className:"form text-start sent_otp",onSubmit:e=>{e.preventDefault(),D(!0),n?n.confirm(b).then(e=>{D(!1),S(e.user);let t=e.user.uid,r=e.user.phoneNumber,a=e.user.photoURL,i=e.user.email,n=e.user.displayName,{isNewUser:c}=(0,x.gK)(e);(0,l.z2)(t,"mobile",n,i,a,r,null,null,e=>{s.ZP.success((0,f.t)("successfully_login")),c?k(!0):E.push("/quiz-play")},e=>{"126"===e?s.ZP.error((0,f.t)("ac_deactive")):(s.ZP.error("".concat((0,f.t)("Please ")).concat((0,f.t)("try_again"))),console.log("handleVerifyCode",e))})}).catch(e=>{T(e),D(!1)}).finally(()=>{D(!1)}):(D(!1),s.ZP.error("Confirmation result is null. Please try again."))},children:[(0,a.jsx)("h3",{className:"mb-4  text-left Otp_Verification_title",children:(0,f.t)("otp_Verification")}),(0,a.jsxs)("div",{className:"form",children:[(0,a.jsxs)("label",{htmlFor:"code",className:"Otp_Verification_title paddingRight",children:[(0,f.t)("send_code")," +",e]}),(0,a.jsx)(p.Z,{value:b,onChange:_,numInputs:6,containerStyle:"otpbox",renderSeparator:(0,a.jsx)("span",{className:"space"}),renderInput:e=>(0,a.jsx)("input",{...e,className:"custom-input-class"})}),(0,a.jsx)("div",{className:"text-center resend_otp my-2",children:0==P?(0,a.jsxs)("div",{className:"hide_resend_otp",children:[" ",(0,a.jsx)("p",{children:(0,f.t)("didnt_get")}),(0,a.jsx)(u(),{className:"main-color",href:"#",onClick:t=>{t.preventDefault(),D(!0);let r="+"+e,a=window.recaptchaVerifier;(0,x.$g)(O,r,a).then(e=>{N(!0),D(!1),d(e),s.ZP.success((0,f.t)("otp_sent"))}).catch(e=>{T(e),s.ZP.error(e.message),D(!1)}),Z(60),V(!0)},children:(0,f.t)("otp_resend")})]}):(0,a.jsxs)("p",{children:[" ",(0,f.t)("please_wait")," ",P]})}),(0,a.jsx)("div",{className:"Otp_Verification_title",children:(0,a.jsx)("button",{className:"btn btn-primary",type:"submit",children:I?(0,f.t)("please_wait"):(0,f.t)("submit")})}),(0,a.jsx)("div",{className:"Otp_Verification_title",children:(0,a.jsxs)("button",{type:"button",className:"btn ",onClick:e=>{e.preventDefault(),_(""),d(null),N(!1)},children:[(0,a.jsx)(j.D_,{}),"  ",(0,f.t)("Back_to_login")]})})]})]}):null]})})}),(0,a.jsx)("div",{id:"recaptcha-container"})]})})})})}}]);