"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1805],{61805:function(e,n,o){o.r(n);var r=o(85893),s=o(67294),l=o(86501),t=o(45697),i=o.n(t),a=o(65077),u=o(91768),d=o(9661),c=o(9473),v=o(9559),h=o(23115),_=o(54074),g=o(31417),p=o(27262),f=o(82453),w=o(52732),b=o(72089),y=o(25477);let m=e=>{var n,o;let{t,questions:i,timerSeconds:u,onOptionClick:m,onQuestionEnd:x,showLifeLine:S,showBookmark:q,showQuestions:k,unlockedLevel:j,currentLevel:E}=e,[N,Q]=(0,s.useState)(i),[z,R]=(0,s.useState)(0),[Z,A]=(0,s.useState)(0),[P,C]=(0,s.useState)(0),T=(0,s.useRef)(null),M=(0,s.useRef)(null),F=(0,s.useRef)(!1),O=(0,s.useRef)(!1),B=(0,s.useRef)(!1),I=(0,s.useRef)(!1),X=(0,c.v9)(_.zl),G=(0,c.v9)(h.Vb);(0,c.v9)(e=>e.showSeconds.totalSecond);let L=(0,c.I0)(),U=(0,s.useRef)(0),W=null==G?void 0:null===(n=G.data)||void 0===n?void 0:n.find(e=>(null==e?void 0:e.type)==="brainiac"),Y=null==G?void 0:null===(o=G.data)||void 0===o?void 0:o.find(e=>(null==e?void 0:e.type)==="dashing_debut"),D=W&&(null==W?void 0:W.status),V=W&&(null==W?void 0:W.badge_reward),H=Y&&(null==Y?void 0:Y.status),J=Y&&(null==Y?void 0:Y.badge_reward),K=(0,c.v9)(e=>e.User),[$,ee]=(0,s.useState)({}),en=e=>{ee({...$,[e]:!0})};setTimeout(()=>{Q(i)},500);let eo=async()=>{let e=z+1;if(e<(null==N?void 0:N.length)){var n;R(e),null==T||null===(n=T.current)||void 0===n||n.resetTimer()}else{let e,n=null,o=null,r=U.current,s=100*r/(null==N?void 0:N.length);(0,v.Q1)({questions_answered:null==N?void 0:N.length,correct_answers:r,category_id:N[z].category,percentage:s,onSuccess:e=>{},onError:e=>{console.log(e)}}),o=await (0,d.mB)(r,null==N?void 0:N.length,null==X?void 0:X.quiz_zone_correct_answer_credit_score,null==X?void 0:X.quiz_zone_wrong_answer_deduct_score),s>=Number(X.quiz_winning_percentage)?(n=await (0,d.iy)(U.current,null==N?void 0:N.length),j<=E?((0,p.xn)(!0),(0,v.zw)({coins:n,score:o,title:"Quiz Zone Win",status:"0",onSuccess:e=>{(0,g.X5)(e.data)},onError:e=>{console.log(e)}})):(0,p.xn)(!1),(0,v.GR)({category_id:N[z].category_slug,subcategory_id:N[z].subcategory_slug,onSuccess:e=>{parseInt(e.data.level)<=parseInt(N[z].level)&&(0,v.ZM)({category_id:N[z].category,subcategory_id:N[z].subcategory,level:parseInt(N[z].level)+1,onSuccess:e=>{},onError:e=>{console.log(e)}})},onError:e=>{console.log(e)}})):(0,v.zw)({score:o,title:"Quiz Zone Win",status:"0",onSuccess:e=>{(0,g.X5)(e.data)},onError:e=>{console.log(e)}}),L((0,p.gk)(N)),e=!0===I.current?N.length-1:N.length,await x(n,o,e),er(),"0"===H&&(0,v.gs)("dashing_debut",e=>{var n;(0,h.sQ)("dashing_debut","1"),l.ZP.success(t(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.notification_body)),(0,v.zw)({coins:J,title:t("dashing_debut_reward"),status:0,onSuccess:e=>{(0,v.Gq)({onSuccess:e=>{(0,g.X5)(e.data)},onError:e=>{console.log(e)}})},onError:e=>{console.log(e)}})},e=>{console.log(e)})}};(0,s.useEffect)(()=>{(0,p.od)(Z,P)},[Z,P]);let er=()=>{let e=F.current||O.current||B.current||I.current;(null==N?void 0:N.length)<5||"0"!==D||!1!=e||(0,v.gs)("brainiac",e=>{var n;(0,h.sQ)("brainiac","1"),l.ZP.success(t(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.notification_body)),(0,v.zw)({coins:V,title:t("brainiac_reward"),status:0,onSuccess:e=>{(0,v.Gq)({onSuccess:e=>{(0,g.X5)(e.data)},onError:e=>{console.log(e)}})},onError:e=>{console.log(e)}})},e=>{console.log(e)})};return(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)("div",{className:"dashboardPlayUppDiv text-end p-2 pb-0 ",children:(0,r.jsx)(w.Z,{corrAns:Z,inCorrAns:P,currentQuestion:z,questions:N,showBookmark:q,handleBookmarkClick:(e,n)=>{let o="0";return o=n?"1":"0",(0,v.yN)({question_id:e,bookmark:o,type:1,onSuccess:o=>o.error?(l.ZP.error(t("not_remove_que")),!1):(n?(0,d.VB)(1):(0,d.Qh)(e),!0),onError:e=>{console.error(e)}})},showAnswers:!0})}),(0,r.jsxs)("div",{className:"questions",ref:M,children:[(0,r.jsxs)("div",{className:"timerWrapper",children:[k?(0,r.jsx)("div",{className:"levelNumbr",children:(0,r.jsxs)("h5",{className:"levelText",children:[t("level")," : ",N[z].level]})}):"",(0,r.jsx)("div",{className:"inner__headerdash",children:(0,r.jsx)("div",{className:"inner__headerdash",children:N&&""!==N[0].id?(0,r.jsx)(f.Z,{ref:T,timerSeconds:u,onTimerExpire:()=>{eo(),C(P+1)}}):""})})]}),(0,r.jsx)(b.default,{questions:N,currentQuestion:z,setAnswerStatusClass:e=>{let n=N[z];return(0,d.Z1)(e,n.isAnswered,n.answer,n.selected_answer)},handleAnswerOptionClick:e=>{if(!$.hasOwnProperty(z)){var n;en(z);let{id:o,answer:r}=N[z],s=(0,d.QY)(r,null==K?void 0:null===(n=K.data)||void 0===n?void 0:n.firebase_id),l=U.current;s===e?(l++,U.current=l,A(Z+1)):C(P+1);let t=N[z];(0,d.ED)(e,t.answer);let i=[...N];i[z].selected_answer=e,i[z].isAnswered=!0,Q(i),setTimeout(()=>{eo()},1e3),L((0,p.Rp)(l))}let o=T.current.getMinuteandSeconds();L((0,y.sI)(u)),L((0,y.LA)(o))},probability:!0,latex:!0}),S?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"divider",children:(0,r.jsx)("hr",{style:{width:"112%",backgroundColor:"gray",height:"2px"}})}),(0,r.jsx)(a.Z,{handleFiftFifty:()=>{var e;F.current=!0;let n=[...N];if("2"===n[z].question_type)return l.ZP.error(t("lifeline_not_allowed")),!1;let o=["optiona","optionb","optionc","optiond","optione"],r=(0,d.QY)(N[z].answer,null==K?void 0:null===(e=K.data)||void 0===e?void 0:e.firebase_id),s=o.indexOf("option"+r),i=[o[s]];o.splice(s,1),o.map((e,n)=>(""===N[z][e]&&o.splice(n,1),e));let a=Math.floor(Math.random()*((null==o?void 0:o.length)-1));return i.push(o[a]),o.splice(a,1),o=o&&o.map(e=>(delete n[z][e],e)),n[z].fiftyUsed=!0,Q(n),!0},handleAudiencePoll:()=>{var e;O.current=!0;let n=[...N],{answer:o,optione:r,question_type:s}=n[z],l=(0,d.QY)(o,null==K?void 0:null===(e=K.data)||void 0===e?void 0:e.firebase_id),t=[];"2"===s?t=["a","b"]:(t=["a","b","c","d"],N[z].optione&&""!==r&&t.push("e"));let i=function(e,n){let o=[],r=0;for(let e=0;e<n-1;e++)o[e]=Math.floor(Math.random()*(100-(n-e-1)-r-1+1)+1),r+=o[e];return o[n-1]=100-r,o}(0,null==t?void 0:t.length),a=Math.max(...i);n[z]["probability_"+[l]]=a+" %",t.splice(t.indexOf(l),1),i.splice(i.indexOf(a),1),t=t.map((e,o)=>(n[z]["probability_"+[e]]=i[o]+" %",e)),n[z].audeincePoll=!0,Q(n)},handleResetTime:()=>{B.current=!0,T.current.resetTimer()},handleSkipQuestion:()=>{I.current=!0,R(e=>e-1),z<=0&&R(0),eo()},currentquestions:N[z],showFiftyFifty:2!=N[z].question_type,audiencepoll:2!=N[z].question_type,totalQuestions:N.length})]}):""]})]})};m.propTypes={questions:i().array.isRequired,onOptionClick:i().func.isRequired},m.defaultProps={showLifeLine:!0,showBookmark:!0},n.default=(0,u.Z)()(m)}}]);