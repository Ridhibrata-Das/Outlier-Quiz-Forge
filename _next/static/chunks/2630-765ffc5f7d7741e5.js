"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2630],{12630:function(e,s,n){n.r(s);var i=n(85893),o=n(67294),t=n(86501),a=n(45697),r=n.n(a);n(85924);var c=n(91768),l=n(82453),d=n(9661),u=n(9473),_=n(54074),m=n(9559),h=n(31417),p=n(27262),x=n(52732),b=n(25477);let v=e=>{let{t:s,questions:n,timerSeconds:a,onOptionClick:r,onQuestionEnd:c,showBookmark:v,showQuestions:j,isBookmarkPlay:N}=e,[w,y]=(0,o.useState)(n),[g,q]=(0,o.useState)(0),[f,k]=(0,o.useState)(0),[S,E]=(0,o.useState)(0),[C,z]=(0,o.useState)(),[B,R]=(0,o.useState)(0),[A,T]=(0,o.useState)(!1),[Q,P]=(0,o.useState)(!1),[Z,I]=(0,o.useState)(!1),L=(0,o.useRef)(null),U=(0,o.useRef)(null),D=(0,o.useRef)(null),O=(0,u.I0)(),F=(0,u.v9)(e=>e.User),M=(0,u.v9)(p.BO),W=(0,o.useRef)(0),X=(0,u.v9)(_.zl),[V,Y]=(0,o.useState)({}),G=e=>{Y({...V,[e]:!0})},H=()=>{T(!0),P(!0),I(!0)};setTimeout(()=>{y(n)},500);let J=async()=>{T(!1),P(!1),I(!1);let e=g+1;if(e<(null==w?void 0:w.length))q(e),L.current.resetTimer();else{let e=null,n=null,i=W.current,o=100*i/(null==w?void 0:w.length);(0,m.Q1)({questions_answered:null==w?void 0:w.length,correct_answers:i,category_id:w[g].category,percentage:o,onSuccess:e=>{},onError:e=>{console.log(e)}}),n=await (0,d.mB)(i,null==w?void 0:w.length,null==X?void 0:X.audio_quiz_correct_answer_credit_score,null==X?void 0:X.audio_quiz_wrong_answer_deduct_score),o>=Number(X.quiz_winning_percentage)?(e=await (0,d.iy)(W.current,null==w?void 0:w.length),"0"===M.is_play&&(0,m.zw)({coins:e,score:n,title:"".concat(s("audio_quiz")," ").concat(s("win")," "),status:"0",onSuccess:e=>{(0,h.X5)(e.data)},onError:e=>{console.log(e)}})):"0"===M.is_play&&(0,m.zw)({score:n,title:"".concat(s("audio_quiz")," ").concat(s("lose")," "),status:"0",onSuccess:e=>{(0,h.X5)(e.data)},onError:e=>{console.log(e)}}),"0"===M.is_play&&(M.maincat_id&&M.id?(0,m.EB)({type:4,category_id:M.maincat_id,subcategory_id:M.id,onSuccess:e=>{},onError:e=>{console.log(e)}}):(0,m.EB)({type:4,category_id:M.id,onSuccess:e=>{},onError:e=>{console.log(e)}})),await c(e,n)}},K=e=>{let s=L.current.getMinuteandSeconds();if(O((0,b.sI)(a)),O((0,b.LA)(s)),!V.hasOwnProperty(g)){var n;G(g);let{id:s,answer:i}=w[g],o=(0,d.QY)(i,null==F?void 0:null===(n=F.data)||void 0===n?void 0:n.firebase_id),t=W.current;o===e?(t++,W.current=t,k(f+1)):E(S+1);let a=w[g];N||(0,d.ED)(e,a.answer);let c=w.map(n=>n.id===s?{...n,selected_answer:e,isAnswered:!0}:n);y(c),setTimeout(()=>{J()},1e3),O((0,p.Rp)(t)),r(c,t),O((0,p.gk)(c))}},$=e=>{let s=w[g];return N?s.selected_answer==e?"bg-theme":void 0:(0,d.Z1)(e,s.isAnswered,s.answer,s.selected_answer)};return(0,o.useEffect)(()=>{(0,p.od)(f,S)},[f,S]),(0,i.jsxs)(o.Fragment,{children:[(0,i.jsx)("div",{className:"dashboardPlayUppDiv funLearnQuestionsUpperDiv text-end p-2 pb-0 audio_questions_top_margin",children:!N&&(0,i.jsx)(x.Z,{corrAns:f,inCorrAns:S,currentQuestion:g,questions:w,showBookmark:v,handleBookmarkClick:(e,n)=>{let i="0";return i=n?"1":"0",(0,m.yN)({question_id:e,bookmark:i,type:4,onSuccess:i=>i.error?(t.ZP.error(s("not_remove_que")),!1):(n?(0,d.VB)(4):(0,d.Qh)(e),!0),onError:e=>{console.error(e)}})},showAnswers:!0})}),(0,i.jsxs)("div",{className:"questions audioQuestiondashboard",ref:U,children:[(0,i.jsx)("div",{className:N?"d-none":"timerWrapper",children:(0,i.jsx)("div",{className:"inner__headerdash",children:Z?(0,i.jsx)("div",{className:"inner__headerdash",children:w&&""!==w[0].id?(0,i.jsx)(l.Z,{ref:L,timerSeconds:a,onTimerExpire:()=>{J(),H(),E(S+1)}}):""}):""})}),(0,i.jsx)("div",{className:"content__text",children:(0,i.jsx)("p",{className:"question-text pt-4",children:w[g].question})}),(0,i.jsx)("div",{className:"audio_player text-center pb-5",children:(0,i.jsx)("audio",{src:w[g].audio,controls:!0,autoPlay:!0,controlsList:"nodownload noplaybackrate",id:"audio",ref:D,onLoadedMetadata:()=>{z(parseInt(D.current.duration))},onTimeUpdate:()=>{R(parseInt(D.current.currentTime)),B==C-1&&H()},style:{border:"2px solid lightgray",borderRadius:"8px"}})}),(0,i.jsxs)("div",{className:"row optionsWrapper",children:[w[g].optiona?(0,i.jsx)("div",{className:"col-md-6 col-12",children:(0,i.jsx)("div",{className:"inner__questions",children:A?(0,i.jsx)("button",{className:"btn button__ui w-100 ".concat($("a")),onClick:e=>K("a"),children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col",children:w[g].optiona}),w[g].probability_a?(0,i.jsx)("div",{className:"col text-end",children:w[g].probability_a}):""]})}):"—"})}):"",w[g].optionb?(0,i.jsx)("div",{className:"col-md-6 col-12",children:(0,i.jsx)("div",{className:"inner__questions",children:A?(0,i.jsx)("button",{className:"btn button__ui w-100 ".concat($("b")),onClick:e=>K("b"),children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col",children:w[g].optionb}),w[g].probability_b?(0,i.jsx)("div",{className:"col text-end",children:w[g].probability_b}):""]})}):"—"})}):"","1"===w[g].question_type?(0,i.jsxs)(i.Fragment,{children:[w[g].optionc?(0,i.jsx)("div",{className:"col-md-6 col-12",children:(0,i.jsx)("div",{className:"inner__questions",children:A?(0,i.jsx)("button",{className:"btn button__ui w-100 ".concat($("c")),onClick:e=>K("c"),children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col",children:w[g].optionc}),w[g].probability_c?(0,i.jsx)("div",{className:"col text-end",children:w[g].probability_c}):""]})}):"—"})}):"",w[g].optiond?(0,i.jsx)("div",{className:"col-md-6 col-12",children:(0,i.jsx)("div",{className:"inner__questions",children:A?(0,i.jsx)("button",{className:"btn button__ui w-100 ".concat($("d")),onClick:e=>K("d"),children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col",children:w[g].optiond}),w[g].probability_d?(0,i.jsx)("div",{className:"col text-end",children:w[g].probability_d}):""]})}):"—"})}):"",""!==w[g].optione?(0,i.jsx)("div",{className:"row d-flex justify-content-center mob_resp_e",children:(0,i.jsx)("div",{className:"col-md-6 col-12",children:(0,i.jsx)("div",{className:"inner__questions",children:A?(0,i.jsx)("button",{className:"btn button__ui w-100 ".concat($("e")),onClick:e=>K("e"),children:(0,i.jsxs)("div",{className:"row",children:[(0,i.jsx)("div",{className:"col",children:w[g].optione}),w[g].probability_e?(0,i.jsx)("div",{className:"col",style:{textAlign:"right"},children:w[g].probability_e}):""]})}):"—"})})}):""]}):""]}),(0,i.jsx)("div",{className:"show_btn_answers",children:(0,i.jsx)("button",{className:"btn btn-primary d-flex mx-auto my-5 ".concat(Q?"hideShowbutton":""),onClick:H,children:s("show_option")})})]})]})};v.propTypes={questions:r().array.isRequired,onOptionClick:r().func.isRequired},v.defaultProps={showBookmark:!0},s.default=(0,c.Z)()(v)}}]);