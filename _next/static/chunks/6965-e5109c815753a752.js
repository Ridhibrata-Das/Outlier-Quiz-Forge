"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6965],{66965:function(e,n,t){t.r(n);var s=t(85893),l=t(67294),o=t(86501),a=t(45697),i=t.n(a),r=t(91768),d=t(82453),c=t(9661),u=t(9473),m=t(9559),v=t(31417),h=t(50549),_=t(23115),p=t(27262),g=t(39332),b=t(52732),x=t(25477),f=t(54074);let y=e=>{var n,t;let{t:a,questions:i,timerSeconds:r,onOptionClick:y,onQuestionEnd:w,showBookmark:E,isBookmarkPlay:j}=e,[N,S]=(0,l.useState)(i),[k,B]=(0,l.useState)(0),[I,q]=(0,l.useState)(0),[C,T]=(0,l.useState)(0),[Z,z]=(0,l.useState)(""),P=(0,l.useRef)(null),Q=(0,l.useRef)(null),[U,A]=(0,l.useState)(),[R,W]=(0,l.useState)(null),[O,D]=(0,l.useState)(!0);(0,l.useEffect)(()=>{O&&setTimeout(()=>{D(!1)},2e3)},[O]);let L=(0,u.v9)(e=>e.User),X=(0,u.v9)(f.zl),G=(0,u.I0)(),M=(0,l.useRef)(0),Y=null==X?void 0:X.guess_the_word_max_winning_coin,F=null==X?void 0:X.guess_the_word_max_hints,V=(0,u.v9)(p.BO),H=(0,u.v9)(_.Vb),J=null==H?void 0:null===(n=H.data)||void 0===n?void 0:n.find(e=>(null==e?void 0:e.type)==="super_sonic"),K=J&&(null==J?void 0:J.status),$=J&&(null==J?void 0:J.badge_reward);(0,g.useRouter)(),(0,l.useEffect)(()=>{var e,n;let t="";(null===(e=N[k])||void 0===e?void 0:e.answer)&&(t=N[k].answer.ciphertext?(0,c.QY)(N[k].answer,null==L?void 0:null===(n=L.data)||void 0===n?void 0:n.firebase_id):N[k].answer),z(t)},[N,k,c.QY,L]);let ee=e=>{for(let n=(null==e?void 0:e.length)-1;n>0;n--){let t=e[n],s=Math.floor(Math.random()*(n+1));e[n]=e[s],e[s]=t}return e};(0,l.useEffect)(()=>{A(ee(Z.toUpperCase().replace(/\s/g,"").split("").map((e,n)=>({value:e,ansIndex:n})))),W(Z.toUpperCase().replace(/\s/g,"").split("").map(()=>({value:"",index:null})))},[Z]);let en=()=>R.map(e=>e.value).join(""),et=(()=>{let[e,n]=(0,l.useState)(document.activeElement),t=e=>{n(document.activeElement)};return(0,l.useEffect)(()=>(document.addEventListener("focusin",t),()=>{document.removeEventListener("focusin",t)}),[]),e})(),[es,el]=(0,l.useState)(0),[eo,ea]=(0,l.useState)(!1),[ei,er]=(0,l.useState)(1),ed=L&&(null==L?void 0:null===(t=L.data)||void 0===t?void 0:t.coins);(0,l.useEffect)(()=>{if(et){et.value;let e=parseInt(et.getAttribute("data-index"));isNaN(e)||null===e||el(e)}},[et]),(0,l.useEffect)(()=>{es<0&&el(0),es>(null==Z?void 0:Z.length)&&el((null==Z?void 0:Z.length)-1),null!=document.querySelector('[data-index="'.concat(es,'"]'))&&document.querySelector('[data-index="'.concat(es,'"]')).focus()},[es]);let ec=()=>{ea(e=>!1)},eu=(e,n,t)=>{null!==R&&(""!==R[es].value&&(document.getElementById("btn-".concat(R[es].index)).disabled=!1),R[es].value=n,R[es].index=t,document.getElementById("btn-".concat(t)).disabled=!0,el(es+1),W(e=>[...R]),ea(e=>!0))},em=e=>{if(e.preventDefault(),eo){R[es-1].value="";let e=document.getElementById("btn-".concat(R[es-1].index));e&&(e.disabled=!1),ea(e=>!1),R[es-1].value=""}else{let e=document.getElementById("btn-".concat(R[es].index));e&&(e.disabled=!1),R[es].value=""}el(e=>e-1),W(e=>[...R])},ev=e=>{var n;let t=Y&&Number(Y);if("0"===ed||(null==L?void 0:null===(n=L.data)||void 0===n?void 0:n.coins)<t)return o.ZP.error(a("no_enough_coins")),!1;let s=[];U.map((e,n)=>{""===document.getElementById("input-".concat(n)).value&&s.push(n)});let l=null;(null==s?void 0:s.length)!=0&&(l=ee(s)[0]),U.map((n,s)=>{if(n.ansIndex==l&&!document.getElementById("btn-".concat(s)).disabled){var i;n.ansIndex,document.getElementById("btn-".concat(s)).innerText,R[n.ansIndex].value=document.getElementById("btn-".concat(s)).innerText,R[n.ansIndex].index=s;let l=n.ansIndex;if(document.getElementById("btn-".concat(s)).disabled=!0,el(l+1),W(e=>[...R]),ea(e=>!0),er(ei+1),e.currentTarget.disabled=ei>=Number(F),(null==L?void 0:null===(i=L.data)||void 0===i?void 0:i.coins)<t)return o.ZP.error(a("no_enough_coins")),!1;(0,m.zw)({coins:"-"+t,title:a("used_guesstheword_hint"),status:1,onSuccess:e=>{(0,v.X5)(e.data)},onError:e=>{Swal.fire(a("ops"),a("Please "),a("try_again"),"error"),console.log(e)}})}})},eh=()=>{let e=R;e=e.map(e=>(null!==e.index&&(document.getElementById("btn-".concat(e.index)).disabled=!1),{...e,value:""})),W(n=>e),el(0)},e_=()=>{let e=en();er(0),document.getElementById("hntBtn").disabled=!1,eh(),eg(e);let n=P.current.getMinuteandSeconds();G((0,x.sI)(r)),G((0,x.LA)(n))};setTimeout(()=>{S(i)},500);let ep=async()=>{let e=k+1;if(e<(null==N?void 0:N.length))B(e),null!==P.current&&P.current.resetTimer(),eh();else{let e=null,n=null,t=M.current,s=100*t/(null==N?void 0:N.length);(0,m.Q1)({questions_answered:null==N?void 0:N.length,correct_answers:t,category_id:N[k].category,percentage:s,onSuccess:e=>{},onError:e=>{console.log(e)}}),n=await (0,c.mB)(t,null==N?void 0:N.length,null==X?void 0:X.guess_the_word_correct_answer_credit_score,null==X?void 0:X.guess_the_word_wrong_answer_deduct_score),s>=Number(X.quiz_winning_percentage)?(e=await (0,c.iy)(M.current,null==N?void 0:N.length),"0"===V.is_play&&(0,m.zw)({coins:e,Score:n,title:"".concat(a("Guess The Word")," ").concat(a("quiz_win")," "),status:"0",onSuccess:e=>{(0,v.X5)(e.data)},onError:e=>{console.log(e)}})):"0"===V.is_play&&(0,m.zw)({score:n,title:"".concat(a("Guess The Word")," ").concat(a("quiz_win")," "),status:"0",onSuccess:e=>{(0,v.X5)(e.data)},onError:e=>{console.log(e)}}),await w(e,n),"0"===V.is_play&&(V.maincat_id&&V.id?(0,m.EB)({type:3,category_id:V.maincat_id,subcategory_id:V.id,onSuccess:e=>{},onError:e=>{console.log(e)}}):(0,m.EB)({type:3,category_id:V.id,onSuccess:e=>{},onError:e=>{console.log(e)}}))}},eg=e=>{var n;let{id:t,answer:s}=N[k],l=(0,c.QY)(s,null==L?void 0:null===(n=L.data)||void 0===n?void 0:n.firebase_id).toUpperCase().replaceAll(/\s/g,""),i=M.current;l===e?(i++,M.current=i,q(I+1),o.ZP.success(a("correct_answer"))):(o.ZP.error(a("incorrect_answer")),T(C+1));let r=N[k];(0,c.ZU)(e,r.answer);let d=P.current.getTimerSeconds(),u=N.map(n=>n.id===t?{...n,selected_answer:e,isAnswered:!0,timer_seconds:d}:n);eb(u),S(u),setTimeout(()=>{ep()},1e3),G((0,p.Rp)(i)),y(u,i),G((0,p.gk)(u))},eb=e=>{if((null==N?void 0:N.length)<5)return;let n=e.map(e=>e.timer_seconds).filter(e=>e<=20);"0"===K&&(null==n?void 0:n.length)==5&&(0,m.gs)("super_sonic",e=>{var n;(0,_.sQ)("super_sonic","1"),o.ZP.success(a(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.notification_body)),(0,m.zw)({coins:$,title:a("super_sonic_badge_reward"),status:0,onSuccess:e=>{(0,m.Gq)({onSuccess:e=>{(0,v.X5)(e.data)},onError:e=>{console.log(e)}})},onError:e=>{console.log(e)}})},e=>{console.log(e)})};return(0,l.useEffect)(()=>{(0,p.od)(I,C)},[I,C]),(0,s.jsxs)(s.Fragment,{children:[!j&&(0,s.jsx)("div",{className:"dashboardPlayUppDiv selfLearnQuestionsUpperDiv guessWordQuestionsUpperDiv aaazzz text-end p-2 pb-0",children:(0,s.jsx)(b.Z,{corrAns:I,inCorrAns:C,currentQuestion:k,questions:N,showBookmark:E,handleBookmarkClick:(e,n)=>{let t="0";return t=n?"1":"0",(0,m.yN)({question_id:e,bookmark:t,type:3,onSuccess:t=>t.error?(o.ZP.error(a("not_remove_que")),!1):(n?(0,c.VB)(3):(0,c.Qh)(e),!0),onError:e=>{console.error(e)}})},showAnswers:!0})}),(0,s.jsxs)("div",{className:"questions guessthewordque",ref:Q,children:[(0,s.jsx)("div",{className:j?"d-none":"timerWrapper",children:(0,s.jsx)("div",{className:"inner__headerdash",children:(0,s.jsx)("div",{className:"inner__headerdash",children:N&&""!==N[0].id?(0,s.jsx)(d.Z,{ref:P,timerSeconds:r,onTimerExpire:()=>{ep(),T(C+1)}}):""})})}),(0,s.jsx)("div",{className:"content__text",children:(0,s.jsx)("p",{className:"question-text py-4",children:N[k].question})}),N[k].image?(0,s.jsx)("div",{className:"imagedash",children:(0,s.jsx)("img",{src:N[k].image,onError:c.HS,alt:""})}):"",O?(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(h.Z,{count:5})}):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"guess_the_word_comp",children:[(0,s.jsx)("span",{className:"input_box",children:U&&U.map((e,n)=>(0,s.jsx)("input",{"data-index":n,type:"text",value:R[n].value,id:"input-".concat(n),onClick:()=>ec(),className:"custom_input",readOnly:!0},n))}),(0,s.jsx)("div",{className:"col-md-12 col-12 button_area my-4",children:(0,s.jsx)("ul",{children:U?U.map((e,n)=>(0,s.jsx)("li",{children:(0,s.jsx)("button",{className:"btn btn-primary buttondata",id:"btn-".concat(n),onClick:t=>eu(t,e.value,n),children:e.value})},n)):(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(h.Z,{count:5})})})}),(0,s.jsx)("div",{className:"divider",children:(0,s.jsx)("hr",{style:{width:"112%",backgroundColor:"gray",height:"2px"}})}),!j&&(0,s.jsxs)("div",{className:"bottom_button dashoptions mb-4 guessTheWordOtions",children:[(0,s.jsx)("div",{className:"clear_input",children:(0,s.jsx)("button",{className:"btn btn-primary",onClick:e=>em(e),children:a("back")})}),(0,s.jsx)("div",{className:"hint_button",children:(0,s.jsx)("button",{id:"hntBtn",className:"btn btn-primary",disabled:!1,onClick:e=>ev(e),children:a("hint")})}),(0,s.jsx)("div",{className:"submit_button",children:(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>e_(),children:a("submit")})})]}),j&&(0,s.jsx)("div",{className:"bottom_button dashoptions mb-4 guessTheWordOtions",children:(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>void ep(),children:a("submit")})})]})})]})]})};y.propTypes={questions:i().array.isRequired,onOptionClick:i().func.isRequired},y.defaultProps={showBookmark:!0},n.default=(0,r.Z)()(y)}}]);